{"version":3,"sources":["img/unknown-guy.svg","service/QueryApi.js","store/types/userTypes.js","store/actions/userActions.js","components/Spinner/Spinner.js","components/LoginForm/index.js","components/LoginForm/LoginForm.js","components/LoginCard/index.js","components/LoginCard/LoginCard.js","pages/LoginPage/index.js","pages/LoginPage/loginPage.js","components/ProductCard/ProductCard.js","components/Wrapp/Wrapp.js","components/Catalog/Catalog.js","img/search.svg","img/filter.svg","store/types/booksTypes.js","store/actions/booksActions.js","components/CatalogControls/index.js","components/CatalogControls/CatalogControls.js","components/IconMessage/index.js","components/IconMessage/IconMessage.js","components/Wrapp/index.js","img/searchNotFound.svg","pages/CatalogFilterNotFound/index.js","pages/CatalogFilterNotFound/CatalogFilterNotFound.js","img/shopping-cart.svg","components/Header/index.js","components/Header/Header.js","pages/CatalogPage/index.js","pages/CatalogPage/CatalogPage.js","components/ProductDescription/index.js","components/ProductDescription/ProductDescription.js","components/PriceCalc/index.js","components/PriceCalc/PriceCalc.js","store/types/cartTypes.js","components/ProductSingle/ProductSingle.js","store/actions/cartActions.js","components/Spinner/index.js","pages/ProductPage/index.js","pages/ProductPage/ProductPage.js","components/Cart/index.js","components/Cart/Cart.js","store/types/purchaseTypes.js","store/actions/purchaseActions.js","components/CartPurchase/index.js","components/CartPurchase/CartPurchase.js","components/CartEmpty/index.js","components/CartEmpty/CartEmpty.js","store/types/modalTypes.js","pages/CartPage/index.js","pages/CartPage/CartPage.js","pages/NotFoundPage/index.js","pages/NotFoundPage/NotFoundPage.js","components/Modal/index.js","components/Modal/Modal.js","hooks/useRequestError.js","App.js","reportWebVitals.js","store/reducers/userReducer.js","store/reducers/booksReducer.js","store/reducers/cartReducer.js","store/reducers/purchaseReducer.js","store/reducers/modalReducer.js","store/reducers/index.js","store/index.js","index.js"],"names":["QueryApi","URL","method","path","token","data","a","response","fetch","this","headers","Authorization","body","JSON","stringify","request","ok","json","message","username","query","id","books","instance","AUTH_USER","AUTH_USER_ERROR","CLEAR_USER_ERROR","AUTH_USER_LOADING","CLEAR_USER","getInstance","Spinner","as","data-testid","className","role","aria-hidden","LoginForm","handleSubmitForm","errorText","user","useSelector","state","usernameValue","setUsernameValue","onChangeInputHandler","useCallback","target","value","trim","onSubmit","htmlFor","type","placeholder","onChange","disabled","isLoading","LoginCard","useState","setUsername","setErrorText","dispatch","useDispatch","src","userImg","alt","e","preventDefault","length","signin","req","payload","localStorage","setItem","LoginPage","history","useEffect","document","title","setTimeout","replace","ProductCard","product","price","cover","author","to","Wrapp","children","classes","Catalog","items","map","item","LOAD_BOOKS","LOAD_BOOKS_ERROR","CLEAR_BOOKS_ERROR","LOAD_BOOKS_LOADING","LOAD_BOOK_BY_ID","LOAD_BOOK_BY_ID_LOADING","CLEAR_BOOK_SINGLE","FILTER_BOOKS","ADD_FILTER_BOOKS_BY_TITLE","ADD_FILTER_BOOKS_BY_PRICE","CLEAR_FILTER_BOOKS","updateCatalog","getState","filterCondition","CatalogControls","filterText","setFilterText","filterSelect","setFilterSelect","filterByText","searchText","toLowerCase","includes","filterByTitle","filterByPrice","filterBooksByPrice","searchIcon","style","width","filterIcon","IconMessage","icon","opacity","CatalogFilterNotFound","searchNotFound","Header","cart","signOut","removeItem","paddingTop","margin","onClick","cartIcon","CatalogPage","parse","getItem","loadBooks","undefined","console","log","isCatalogLoading","size","center","filteredCatalog","catalog","ProductDescription","description","tags","tag","PriceCalc","totalPrice","setUserCount","setTotalPrice","multiplyPrice","toFixed","errorMessage","setErrorMessage","countChange","marginTop","min","max","color","PUSH_PRODUCT_TO_CART","CLEAR_CART","ProductSingle","userCount","addProductToCart","pushProductToCart","count","ProductPage","match","params","loadBookById","single","isSingleLoading","Cart","totalSum","setTotalSum","total","reduce","acc","key","PURCHASE_SENDING","PURCHASE_ERROR","CLEAR_PURCHASE_ERROR","PURCHASE_SUCCESS","CLEAR_PURCHASE","returnBooksIdArr","products","arr","i","push","purchaseCart","productsId","purchase","CartPurchase","isAvialable","sendPurchase","isSending","CartEmpty","OPEN_MODAL","CLOSE_MODAL","CartPage","isSuccess","onClose","NotFoundPage","Modal","error","modalWrapp","useRef","closeModal","clearError","wrapper","current","handlerWrappClick","classList","contains","addEventListener","removeEventListener","ref","useRequestError","isError","setError","App","modal","userInStorage","signinFromStorage","basename","process","exact","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","avatar","filterConditions","cond","rootReducer","combineReducers","action","filter","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.40742e1b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/unknown-guy.540f68f7.svg\";","export default class QueryApi {\n  URL = 'https://js-band-store-api.glitch.me';\n\n  static instance = null;\n\n  static getInstance() {\n    QueryApi.instance = QueryApi.instance ?? new QueryApi();\n\n    return QueryApi.instance;\n  }\n\n  async query(method, path, token, data) {\n    let response = null;\n\n    try {\n      const request = await fetch(this.URL + path, {\n        method,\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8',\n          Authorization: token ? `Bearer ${token}` : false,\n        },\n        body: JSON.stringify(data),\n      });\n\n      response = {\n        ok: request.ok,\n        data: await request.json(),\n      };\n    } catch (error) {\n      response = {\n        ok: false,\n        data: { message: 'Network error, please, try again' },\n      };\n    }\n\n    return response;\n  }\n\n  async signin(username) {\n    const request = await this.query('POST', '/signin', false, {\n      username,\n    });\n\n    return request;\n  }\n\n  async loadBooks(token) {\n    const request = await this.query('GET', '/books', token);\n\n    return request;\n  }\n\n  async loadBookById(id, token) {\n    const request = await this.query('GET', `/books/${id}`, token);\n\n    return request;\n  }\n\n  async purchase(data, token) {\n    const request = await this.query('POST', '/purchase', token, {\n      books: data,\n    });\n\n    return request;\n  }\n}\n","export const AUTH_USER = 'AUTH_USER';\nexport const AUTH_USER_ERROR = 'AUTH_USER_ERROR';\nexport const CLEAR_USER_ERROR = 'CLEAR_USER_ERROR';\nexport const AUTH_USER_LOADING = 'AUTH_USER_LOADING';\nexport const CLEAR_USER = 'CLEAR_USER';\n","import QueryApi from '../../service/QueryApi';\nimport {\n  AUTH_USER,\n  AUTH_USER_ERROR,\n  AUTH_USER_LOADING,\n  CLEAR_USER,\n} from '../types/userTypes';\n\nconst query = QueryApi.getInstance();\n\nexport const signin = (username) => async (dispatch) => {\n  dispatch({\n    type: AUTH_USER_LOADING,\n  });\n\n  const req = await query.signin(username);\n\n  dispatch({\n    type: req.ok ? AUTH_USER : AUTH_USER_ERROR,\n    payload: req.data,\n  });\n\n  if (req.ok) localStorage.setItem('authUser', JSON.stringify(req.data));\n};\n\nexport const signout = () => {\n  localStorage.removeItem('authUser');\n\n  return {\n    type: CLEAR_USER,\n  };\n};\n\nexport const signinFromStorage = () => {\n  const userInStorage = localStorage.getItem('authUser');\n\n  if (!userInStorage) return { type: 'none' };\n\n  return {\n    type: AUTH_USER,\n    payload: JSON.parse(userInStorage),\n  };\n};\n","import React from 'react';\nimport './Spinner.scss';\n\nexport default function Spinner({ as }) {\n  if (as === 'span') {\n    return (\n      <span\n        data-testid=\"spinner-span\"\n        className=\"spinner-border spinner-border-sm\"\n        role=\"status\"\n        aria-hidden=\"true\"\n      />\n    );\n  }\n  return (\n    <div\n      data-testid=\"spinner-div\"\n      className=\"spinner-border d-block mx-auto mt-5\"\n      role=\"status\"\n    >\n      <span className=\"sr-only\">Loading...</span>\n    </div>\n  );\n}\n","import LoginForm from './LoginForm';\n\nexport default LoginForm;\n","import React, { useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport Spinner from '../Spinner/Spinner';\n\nexport default function LoginForm({ handleSubmitForm, username, errorText }) {\n  const user = useSelector((state) => state.user);\n  const [usernameValue, setUsernameValue] = username;\n  const onChangeInputHandler = useCallback(({ target }) => {\n    setUsernameValue(target.value.trim());\n  }, [setUsernameValue]);\n\n  return (\n    <form data-testid=\"login-form\" onSubmit={handleSubmitForm}>\n      <div className=\"form-group\">\n        <label htmlFor=\"username-input\" className=\"w-100\">\n          Name\n        </label>\n        <input\n          id=\"username-input\"\n          data-testid=\"username-input\"\n          type=\"text\"\n          className={`form-control ${errorText ? 'is-invalid' : ''}`}\n          placeholder=\"Dasha...\"\n          value={usernameValue}\n          onChange={onChangeInputHandler}\n        />\n        <div className=\"invalid-feedback \">{errorText}</div>\n      </div>\n      <button className=\"btn btn-primary btn-block\" type=\"submit\" disabled={user.isLoading}>\n        {user.isLoading && <Spinner as=\"span\" />}\n        Log in\n      </button>\n    </form>\n  );\n}\n","import LoginCard from './LoginCard';\n\nexport default LoginCard;\n","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport userImg from '../../img/unknown-guy.svg';\nimport { signin } from '../../store/actions/userActions';\nimport LoginForm from '../LoginForm';\n\nexport default function LoginCard() {\n  const [username, setUsername] = useState('');\n  const [errorText, setErrorText] = useState(null);\n  const dispatch = useDispatch();\n  const user = useSelector((state) => state.user);\n\n  const handleSubmitForm = (e) => {\n    e.preventDefault();\n\n    if (username.length < 4 || username.length > 16) {\n      setErrorText('Username is not valid');\n      return;\n    }\n\n    setErrorText(null);\n\n    dispatch(signin(username));\n  };\n\n  return (\n    <div data-testid=\"Login\" className=\"card login-card\">\n      <div className=\"card-header\">Login</div>\n      <img\n        className=\"card-img-top px-5 pt-4\"\n        src={userImg}\n        alt=\"avatar\"\n      />\n      {user.token === null && (\n        <div className=\"card-body\">\n          <LoginForm\n            handleSubmitForm={handleSubmitForm}\n            username={[username, setUsername]}\n            errorText={errorText}\n          />\n        </div>\n      )}\n      {user.token !== null && (\n        <div className=\"card-body text-center\">\n          <h3>\n            Welcome,\n            {' '}\n            {user.username}\n          </h3>\n          <h6 className=\"text-muted\">Redirecting...</h6>\n        </div>\n      )}\n    </div>\n  );\n}\n","import LoginPage from './loginPage';\n\nexport default LoginPage;\n","import React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport LoginCard from '../../components/LoginCard';\n\nexport default function LoginPage({ history }) {\n  const user = useSelector((state) => state.user);\n\n  useEffect(() => {\n    document.title = 'Login';\n\n    if (user.token !== null) {\n      setTimeout(() => {\n        history.replace('/books');\n      }, 2000);\n    }\n  }, [user.token, history]);\n\n  return (\n    <div className=\"container full-height\">\n      <div className=\"row justify-content-center h-100\">\n        <div className=\"col-sm-6 col-xl-4\">\n          <div className=\"d-flex flex-column justify-content-center h-100\">\n            <LoginCard />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './ProductCard.scss';\n\nexport default function ProductCard({ product }) {\n  const {\n    id, title, price, cover, author,\n  } = product;\n\n  return (\n    <div className=\"card mb-4 product\">\n      <img className=\"card-img-top product-img\" data-testid=\"cover\" src={cover} alt={title} />\n      <div className=\"card-body\">\n        <h5 className=\"card-title\" data-testid=\"title\">{title}</h5>\n        <h6 className=\"card-subtitle mb-2 text-muted\" data-testid=\"author\">{author}</h6>\n        <div className=\"row\">\n          <div className=\"col-lg-5\">\n            <span className=\"price\" data-testid=\"price\">{price}</span>\n          </div>\n          <div className=\"col-lg-7\">\n            <Link data-testid=\"link\" to={`/books/${id}`} className=\"bttn primary\">\n              View\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function Wrapp({ children, className }) {\n  const classes = className ?? '';\n\n  return (\n    <div className=\"container\">\n      <div className={`row ${classes}`}>{children}</div>\n    </div>\n  );\n}\n","import React from 'react';\nimport ProductCard from '../ProductCard/ProductCard';\nimport Wrapp from '../Wrapp/Wrapp';\n\nexport default function Catalog({ items }) {\n  return (\n    <Wrapp>\n      {items.map((item) => (\n        <div data-testid=\"Catalog-item\" className=\"col-sm-6 col-md-4 col-lg-3\" key={item.id}>\n          <ProductCard product={item} />\n        </div>\n      ))}\n    </Wrapp>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/search.8f973b11.svg\";","export default __webpack_public_path__ + \"static/media/filter.10b90230.svg\";","export const LOAD_BOOKS = 'LOAD_BOOKS';\nexport const LOAD_BOOKS_ERROR = 'LOAD_BOOKS_ERROR';\nexport const CLEAR_BOOKS_ERROR = 'CLEAR_BOOKS_ERROR';\nexport const LOAD_BOOKS_LOADING = 'LOAD_BOOKS_LOADING';\nexport const LOAD_BOOK_BY_ID = 'LOAD_BOOK_BY_ID';\nexport const LOAD_BOOK_BY_ID_LOADING = 'LOAD_BOOK_BY_ID_LOADING';\nexport const CLEAR_BOOK_SINGLE = 'CLEAR_BOOK_SINGLE';\n\nexport const FILTER_BOOKS = 'FILTER_BOOKS';\nexport const ADD_FILTER_BOOKS_BY_TITLE = 'ADD_FILTER_BOOKS_BY_TITLE';\nexport const ADD_FILTER_BOOKS_BY_PRICE = 'ADD_FILTER_BOOKS_BY_PRICE';\nexport const CLEAR_FILTER_BOOKS = 'CLEAR_FILTER_BOOKS';\n","import QueryApi from '../../service/QueryApi';\nimport {\n  LOAD_BOOKS,\n  LOAD_BOOKS_LOADING,\n  LOAD_BOOKS_ERROR,\n  LOAD_BOOK_BY_ID,\n  LOAD_BOOK_BY_ID_LOADING,\n  CLEAR_BOOK_SINGLE,\n  FILTER_BOOKS,\n  CLEAR_FILTER_BOOKS,\n  ADD_FILTER_BOOKS_BY_PRICE,\n  ADD_FILTER_BOOKS_BY_TITLE,\n} from '../types/booksTypes';\n\nconst query = QueryApi.getInstance();\n\nexport const loadBooks = () => async (dispatch) => {\n  dispatch({\n    type: LOAD_BOOKS_LOADING,\n  });\n\n  const { token } = JSON.parse(localStorage.getItem('authUser')) ?? {};\n  const req = await query.loadBooks(token);\n\n  if (req !== undefined) {\n    console.log('work');\n  } else {\n    console.log('null');\n  }\n\n  dispatch({\n    type: req.ok ? LOAD_BOOKS : LOAD_BOOKS_ERROR,\n    payload: req.data,\n  });\n};\n\nexport const loadBookById = (id) => async (dispatch) => {\n  dispatch({\n    type: LOAD_BOOK_BY_ID_LOADING,\n  });\n\n  const { token } = JSON.parse(localStorage.getItem('authUser')) ?? {};\n\n  const req = await query.loadBookById(id, token);\n\n  dispatch({\n    type: req.ok ? LOAD_BOOK_BY_ID : LOAD_BOOKS_ERROR,\n    payload: req.data,\n  });\n};\n\nexport const clearBookSingle = () => ({\n  type: CLEAR_BOOK_SINGLE,\n});\n\nconst updateCatalog = (getState) => {\n  const { filterCondition } = getState().books;\n  let type = FILTER_BOOKS;\n\n  try {\n    if (filterCondition.title() && filterCondition.price()) {\n      type = CLEAR_FILTER_BOOKS;\n    }\n  } catch (e) {\n    type = FILTER_BOOKS;\n  }\n\n  return { type };\n};\n\nexport const filterBooksByPrice = (value) => (dispatch, getState) => {\n  let payload;\n  const type = ADD_FILTER_BOOKS_BY_PRICE;\n\n  if (value === 'to_25') {\n    payload = (price) => price < 25;\n  } else if (value === 'between') {\n    payload = (price) => price > 25 && price < 50;\n  } else if (value === 'higher_50') {\n    payload = (price) => price > 50;\n  } else {\n    payload = () => true;\n  }\n\n  dispatch({\n    type,\n    payload,\n  });\n\n  dispatch(updateCatalog(getState));\n};\n\nexport const filterByTitle = (value) => (dispatch, getState) => {\n  const searchText = value.trim().toLowerCase();\n  let payload;\n\n  if (value) {\n    payload = (title) => title.toLowerCase().includes(searchText);\n  } else {\n    payload = () => true;\n  }\n\n  dispatch({\n    type: ADD_FILTER_BOOKS_BY_TITLE,\n    payload,\n  });\n\n  dispatch(updateCatalog(getState));\n};\n","import CatalogControls from './CatalogControls';\n\nexport default CatalogControls;\n","import React, { useCallback, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport searchIcon from '../../img/search.svg';\nimport filterIcon from '../../img/filter.svg';\nimport Wrapp from '../Wrapp/Wrapp';\nimport { filterBooksByPrice, filterByTitle } from '../../store/actions/booksActions';\n\nexport default function CatalogControls() {\n  const [filterText, setFilterText] = useState('');\n  const [filterSelect, setFilterSelect] = useState('default');\n  const dispatch = useDispatch();\n\n  const filterByText = useCallback(({ target }) => {\n    const { value } = target;\n\n    setFilterText(value);\n    dispatch(filterByTitle(value));\n  }, [setFilterText, dispatch]);\n\n  const filterByPrice = useCallback(({ target }) => {\n    const { value } = target;\n\n    setFilterSelect(value);\n    dispatch(filterBooksByPrice(value));\n  }, [setFilterSelect, dispatch]);\n\n  return (\n    <Wrapp>\n      <div className=\"col-md-6 col-lg-3\">\n        <div className=\"input-group mb-4\">\n          <div className=\"input-group-prepend\">\n            <div className=\"input-group-text\">\n              <img src={searchIcon} style={{ width: 15 }} alt=\"icon\" />\n            </div>\n          </div>\n          <input\n            data-testid=\"search-book\"\n            className=\"form-control\"\n            placeholder=\"Find a book...\"\n            value={filterText}\n            onChange={filterByText}\n          />\n        </div>\n      </div>\n      <div className=\"col-md-6 col-lg-3\">\n        <div className=\"input-group mb-4\">\n          <div className=\"input-group-prepend\">\n            <div className=\"input-group-text\">\n              <img src={filterIcon} style={{ width: 15 }} alt=\"icon\" />\n            </div>\n          </div>\n          <select\n            data-testid=\"filter-price\"\n            className=\"custom-select\"\n            value={filterSelect}\n            onChange={filterByPrice}\n          >\n            <option value=\"default\">Price...</option>\n            <option value=\"to_25\">&lt; 25</option>\n            <option value=\"between\">25 &lt; price &lt; 50</option>\n            <option value=\"higher_50\">&gt; 50</option>\n          </select>\n        </div>\n      </div>\n    </Wrapp>\n  );\n}\n","import IconMessage from './IconMessage';\n\nexport default IconMessage;\n","import React from 'react';\n\nexport default function IconMessage({ icon, message }) {\n  return (\n    <div className=\"col text-center text-muted\">\n      <img\n        src={icon}\n        className=\"w-25 p-5 mt-5\"\n        alt={message}\n        style={{ opacity: 0.2 }}\n      />\n      <h3>{message}</h3>\n    </div>\n  );\n}\n","import Wrapp from './Wrapp';\n\nexport default Wrapp;\n","export default __webpack_public_path__ + \"static/media/searchNotFound.d4b3b794.svg\";","import CatalogFilterNotFound from './CatalogFilterNotFound';\n\nexport default CatalogFilterNotFound;\n","import React from 'react';\nimport IconMessage from '../../components/IconMessage';\nimport Wrapp from '../../components/Wrapp';\nimport searchNotFound from '../../img/searchNotFound.svg';\n\nexport default function CatalogFilterNotFound() {\n  return (\n    <Wrapp>\n      <IconMessage\n        icon={searchNotFound}\n        message=\"No books found...\"\n      />\n    </Wrapp>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/shopping-cart.c4b03591.svg\";","import Header from './Header';\n\nexport default Header;\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport cartIcon from '../../img/shopping-cart.svg';\nimport { signout } from '../../store/actions/userActions';\nimport Wrapp from '../Wrapp/Wrapp';\nimport './Header.scss';\nimport userImg from '../../img/unknown-guy.svg';\n\nexport default function Header() {\n  const user = useSelector((state) => state.user);\n  const cart = useSelector((state) => state.cart);\n  const dispatch = useDispatch();\n\n  const signOut = useCallback(() => {\n    dispatch(signout());\n  }, [dispatch]);\n\n  return (\n    <header className=\"mb-5\">\n      <div className=\"bg-dark text-light\">\n        <Wrapp className=\"py-2 justify-content-end\">\n          <div className=\"col-5 col-xs-8 col-md-2 text-right pr-0\">\n            <span data-testid=\"username\" className=\"d-inline-block\" style={{ paddingTop: '.2rem' }}>\n              {user.username}\n              <img\n                data-testid=\"avatar\"\n                src={userImg}\n                style={{ width: 26, margin: '-3px 0 0 7px' }}\n                className=\"rounded\"\n                alt=\"avatar\"\n              />\n            </span>\n          </div>\n          <div className=\"col-5 col-xs-4 col-md-2\">\n            <button\n              data-testid=\"sign-out-button\"\n              className=\"bttn secondary solid btn-sm\"\n              type=\"button\"\n              onClick={signOut}\n            >\n              Sign Out\n            </button>\n          </div>\n        </Wrapp>\n      </div>\n      <div className=\"border-bottom bg-light\">\n        <Wrapp className=\"py-5\">\n          <div className=\"col-7 col-md-10\">\n            <h2 className=\"header-title\">\n              <Link to=\"/books\">JS Book Store</Link>\n            </h2>\n          </div>\n          <div className=\"col-5 col-md-2\">\n            <div className=\"d-flex flex-column justify-content-center h-100\">\n              <Link data-testid=\"cart-button\" to=\"/cart\" className=\"bttn light\">\n                <img className=\"bttn-img\" src={cartIcon} alt=\"cart\" />\n                Cart\n                {' '}\n                <b>\n                  (\n                  {cart.length}\n                  )\n                </b>\n              </Link>\n            </div>\n          </div>\n        </Wrapp>\n      </div>\n    </header>\n  );\n}\n","import CatalogPage from './CatalogPage';\n\nexport default CatalogPage;\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Catalog from '../../components/Catalog/Catalog';\nimport CatalogControls from '../../components/CatalogControls';\nimport CatalogFilterNotFound from '../CatalogFilterNotFound';\nimport Header from '../../components/Header';\nimport Spinner from '../../components/Spinner/Spinner';\nimport { loadBooks } from '../../store/actions/booksActions';\nimport { CLEAR_FILTER_BOOKS } from '../../store/types/booksTypes';\n\nexport default function CatalogPage() {\n  const books = useSelector((state) => state.books);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    document.title = 'Catalog';\n\n    dispatch(loadBooks());\n\n    return () => {\n      dispatch({\n        type: CLEAR_FILTER_BOOKS,\n      });\n    };\n  }, [dispatch]);\n\n  return (\n    <>\n      <Header />\n      <CatalogControls />\n      {books.isCatalogLoading && <Spinner size=\"lg\" center />}\n      {!books.isCatalogLoading && <Catalog items={books.filteredCatalog ?? books.catalog} />}\n      {books.filteredCatalog && books.filteredCatalog.length === 0 && <CatalogFilterNotFound />}\n    </>\n  );\n}\n","import ProductDescription from './ProductDescription';\n\nexport default ProductDescription;\n","import React from 'react';\nimport './ProductDescription.scss';\n\nexport default function ProductDescription({ product }) {\n  const {\n    title,\n    author,\n    cover,\n    description,\n    tags,\n  } = product;\n\n  return (\n    <div className=\"card product-desc mb-4\">\n      <div className=\"row flex-column-reverse  flex-sm-row\">\n        <div className=\"col\">\n          <img data-testid=\"prod-cover\" src={cover} className=\"product-desc-img w-100\" alt=\"a\" />\n          <p data-testid=\"prod-desc\" className=\"p-4\">{description}</p>\n        </div>\n        <div className=\"col\">\n          <div className=\"pt-4 pr-4 pl-4 pl-sm-0\">\n            <h3 data-testid=\"prod-title\">{title}</h3>\n            <span data-testid=\"prod-author\" className=\"text-muted h6\">{author}</span>\n            <p className=\"tags\">\n              {tags.map((tag) => <span key={tag} className=\"badge badge-secondary\">{tag}</span>)}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import PriceCalc from './PriceCalc';\n\nexport default PriceCalc;\n","import React, { useCallback, useState } from 'react';\n\nexport default function PriceCalc({\n  price, totalPrice, setUserCount, setTotalPrice,\n}) {\n  const multiplyPrice = useCallback((value) => +(value * price).toFixed(2), [price]);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const countChange = useCallback(({ target }) => {\n    const value = +target.value;\n    const count = 42;\n\n    if (value <= count && value > 0) {\n      setTotalPrice(multiplyPrice(value));\n      setUserCount(value);\n      setErrorMessage('');\n    } else {\n      // eslint-disable-next-line no-param-reassign\n      target.value = '';\n      setTotalPrice(multiplyPrice(target.value));\n      setErrorMessage('Please enter a valid value between 1 and 42');\n    }\n  }, [multiplyPrice, setUserCount, setTotalPrice]);\n\n  return (\n    <div className=\"card p-4\">\n      <div className=\"row\">\n        <div className=\"col\">\n          <p>Price, $</p>\n        </div>\n        <div className=\"col-md-4 col-xl-3 col-5 text-right\">\n          <p>{price}</p>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col\">\n          <p>Count</p>\n        </div>\n        <div className=\"col-md-4 col-xl-3 col-5 text-right\">\n          <div className=\"input-group\" style={{ marginTop: '-3px' }}>\n            <input\n              data-testid=\"price-counter\"\n              className=\"form-control form-control-sm\"\n              type=\"number\"\n              min=\"1\"\n              max=\"42\"\n              onChange={countChange}\n            />\n          </div>\n        </div>\n      </div>\n      {errorMessage && (\n        <div className=\"row\">\n          <div className=\"col\">\n            <p style={{ color: 'red' }}>{errorMessage}</p>\n          </div>\n        </div>\n      )}\n      <div className=\"row font-weight-bold\">\n        <div className=\"col\">\n          <p>Total Price, $</p>\n        </div>\n        <div className=\"col-md-4 col-xl-3 col-5 text-right\">\n          <p data-testid=\"total-price\">{setUserCount === 0 ? 0 : totalPrice}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","export const PUSH_PRODUCT_TO_CART = 'PUSH_PRODUCT_TO_CART';\nexport const CLEAR_CART = 'CLEAR_CART';\n","import React, { useState, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport ProductDescription from '../ProductDescription';\nimport PriceCalc from '../PriceCalc';\nimport Wrapp from '../Wrapp/Wrapp';\nimport { pushProductToCart } from '../../store/actions/cartActions';\n\nexport default function ProductSingle({ product }) {\n  const [userCount, setUserCount] = useState(1);\n  const [totalPrice, setTotalPrice] = useState(product.price);\n  const dispatch = useDispatch();\n\n  const addProductToCart = useCallback(() => {\n    const { id, title, price } = product;\n    dispatch(pushProductToCart({\n      id, title, userCount, price, totalPrice,\n    }));\n  },\n  [dispatch, product, userCount, totalPrice]);\n\n  return (\n    <Wrapp>\n      <div className=\"col-md-8\">\n        <ProductDescription product={product} />\n      </div>\n      <div className=\"col-md-4 mb-5\">\n        <PriceCalc\n          price={product.price}\n          totalPrice={totalPrice}\n          count={product.count}\n          userCount={userCount}\n          setUserCount={setUserCount}\n          setTotalPrice={setTotalPrice}\n        />\n        <div className=\"pt-4 text-right\">\n          <button\n            data-testid=\"push-to-cart-button\"\n            className=\"btn btn-success\"\n            type=\"button\"\n            onClick={addProductToCart}\n            disabled={userCount < 1 || userCount > product.count}\n          >\n            Add to cart\n          </button>\n        </div>\n      </div>\n    </Wrapp>\n  );\n}\n","import {\n  PUSH_PRODUCT_TO_CART,\n} from '../types/cartTypes';\n\nexport const pushProductToCart = (product) => ({\n  type: PUSH_PRODUCT_TO_CART,\n  payload: product,\n});\n\nexport const a = 1;\n","import Spinner from './Spinner';\n\nexport default Spinner;\n","import ProductPage from './ProductPage';\n\nexport default ProductPage;\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Header from '../../components/Header';\nimport ProductSingle from '../../components/ProductSingle/ProductSingle';\nimport { clearBookSingle, loadBookById } from '../../store/actions/booksActions';\nimport Spinner from '../../components/Spinner';\n\nexport default function ProductPage({ match }) {\n  const books = useSelector((state) => state.books);\n  const dispatch = useDispatch();\n  const { id } = match.params;\n\n  useEffect(() => {\n    dispatch(loadBookById(id));\n\n    return () => dispatch(clearBookSingle());\n  }, [id, dispatch]);\n\n  useEffect(() => {\n    if (books.single) {\n      document.title = books.single.title;\n    }\n  }, [books.single]);\n\n  return (\n    <>\n      <Header />\n      {books.isSingleLoading && <Spinner size=\"lg\" center />}\n      {!books.isSingleLoading && books.single && <ProductSingle product={books.single} />}\n    </>\n  );\n}\n","import Cart from './Cart';\n\nexport default Cart;\n","import React, { useEffect, useState } from 'react';\nimport Wrapp from '../Wrapp/Wrapp';\n\nexport default function Cart({ items }) {\n  const [totalSum, setTotalSum] = useState(0);\n\n  useEffect(() => {\n    const total = items.reduce((acc, { totalPrice }) => acc + totalPrice, 0);\n    setTotalSum(total.toFixed(2));\n  }, [items]);\n\n  return (\n    <Wrapp>\n      <div className=\"col\">\n        <div className=\"card p-4 table-responsive\">\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th className=\"w-75 border-top-0\">Name</th>\n                <th className=\"border-top-0 text-right\">Count</th>\n                <th className=\"border-top-0 text-right\">Price</th>\n                <th className=\"text-right border-top-0\">Total</th>\n              </tr>\n            </thead>\n            <tbody>\n              {items.map(({\n                key, title, userCount, price, totalPrice,\n              }) => (\n                <tr key={key} data-testid=\"cart-item\">\n                  <td>{title}</td>\n                  <td className=\"text-right\">{userCount}</td>\n                  <td className=\"text-right\">{price}</td>\n                  <td className=\"text-right\">{totalPrice}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        <div className=\"row mt-4 justify-content-end\">\n          <div className=\"col-md-2 col-sm-4 text-right\">\n            <b>\n              Total Price:\n              {' '}\n              {totalSum}\n              $\n            </b>\n          </div>\n        </div>\n      </div>\n    </Wrapp>\n  );\n}\n","export const PURCHASE_SENDING = 'PURCHASE_SENDING';\nexport const PURCHASE_ERROR = 'PURCHASE_ERROR';\nexport const CLEAR_PURCHASE_ERROR = 'CLEAR_PURCHASE_ERROR';\nexport const PURCHASE_SUCCESS = 'PURCHASE_SUCCESS';\nexport const CLEAR_PURCHASE = 'CLEAR_PURCHASE';\n","import QueryApi from '../../service/QueryApi';\nimport {\n  PURCHASE_ERROR,\n  PURCHASE_SENDING,\n  PURCHASE_SUCCESS,\n} from '../types/purchaseTypes';\n\nconst query = QueryApi.getInstance();\n\nconst returnBooksIdArr = (products) => products.reduce((arr, { id, userCount }) => {\n  for (let i = 0; i < userCount; i += 1) arr.push(id);\n  return arr;\n}, []);\n\nconst purchaseCart = (products) => async (dispatch) => {\n  const productsId = returnBooksIdArr(products);\n\n  dispatch({\n    type: PURCHASE_SENDING,\n  });\n\n  const { token } = JSON.parse(localStorage.getItem('authUser'));\n\n  const req = await query.purchase(productsId, token);\n\n  dispatch({\n    type: req.ok ? PURCHASE_SUCCESS : PURCHASE_ERROR,\n    payload: req?.data ?? { message: 'Network error' },\n  });\n};\n\nexport default purchaseCart;\n","import CartPurchase from './CartPurchase';\n\nexport default CartPurchase;\n","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport purchaseCart from '../../store/actions/purchaseActions';\nimport Wrapp from '../Wrapp/Wrapp';\nimport Spinner from '../Spinner';\n\nexport default function CartPurchase({ isAvialable }) {\n  const cart = useSelector((state) => state.cart);\n  const purchase = useSelector((state) => state.purchase);\n  const dispatch = useDispatch();\n\n  const sendPurchase = useCallback(() => {\n    dispatch(purchaseCart(cart));\n  }, [dispatch, cart]);\n\n  return (\n    <Wrapp>\n      <div className=\"col\">\n        <div className=\"row mb-4 justify-content-end\">\n          <div className=\"col-md-2 col-sm-4\">\n            <button\n              data-testid=\"purchase-button\"\n              className=\"bttn primary solid\"\n              type=\"button\"\n              onClick={sendPurchase}\n              disabled={!isAvialable}\n            >\n              {purchase.isSending && <Spinner as=\"span\" />}\n              Purchase\n            </button>\n          </div>\n        </div>\n      </div>\n    </Wrapp>\n  );\n}\n","import CartEmpty from './CartEmpty';\n\nexport default CartEmpty;\n","import React from 'react';\nimport Wrapp from '../Wrapp';\nimport cartIcon from '../../img/shopping-cart.svg';\nimport IconMessage from '../IconMessage';\n\nexport default function CartEmpty() {\n  return (\n    <Wrapp>\n      <IconMessage\n        icon={cartIcon}\n        message=\"Cart empty...\"\n      />\n    </Wrapp>\n  );\n}\n","export const OPEN_MODAL = 'OPEN_MODAL';\nexport const CLOSE_MODAL = 'CLOSE_MODAL';\n","import CartPage from './CartPage';\n\nexport default CartPage;\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Header from '../../components/Header';\nimport Cart from '../../components/Cart';\nimport CartPurchase from '../../components/CartPurchase';\nimport CartEmpty from '../../components/CartEmpty';\nimport { OPEN_MODAL } from '../../store/types/modalTypes';\nimport { CLEAR_PURCHASE } from '../../store/types/purchaseTypes';\nimport { CLEAR_CART } from '../../store/types/cartTypes';\n\nexport default function CartPage() {\n  const cart = useSelector((state) => state.cart);\n  const purchase = useSelector((state) => state.purchase);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    document.title = `Cart (${cart.length})`;\n  }, [cart.length]);\n\n  useEffect(() => {\n    if (purchase.isSuccess) {\n      dispatch({\n        type: OPEN_MODAL,\n        payload: {\n          title: 'You successfully placed an order',\n          message: <Cart items={[...cart]} />,\n          onClose: () => {\n            dispatch({ type: CLEAR_PURCHASE });\n            dispatch({ type: CLEAR_CART });\n          },\n        },\n      });\n    }\n  }, [purchase.isSuccess, dispatch, cart]);\n\n  return (\n    <>\n      <Header />\n      <CartPurchase isAvialable={cart.length > 0} />\n      {cart.length === 0 && <CartEmpty />}\n      {cart.length > 0 && <Cart items={cart} />}\n    </>\n  );\n}\n","import NotFoundPage from './NotFoundPage';\n\nexport default NotFoundPage;\n","import React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport Wrapp from '../../components/Wrapp/Wrapp';\n\nexport default function NotFoundPage() {\n  useEffect(() => {\n    document.title = '404  Page not found';\n  }, []);\n\n  return (\n    <Wrapp>\n      <div className=\"col text-center mt-5 pt-5\">\n        <img\n          alt=\"page not found\"\n          src=\"https://media.giphy.com/media/tvGOBZKNEX0ac/giphy-downsized-large.gif\"\n          className=\"w-100 mb-3 rounded\"\n        />\n        <h1>Sorry, page not found</h1>\n        <div>\n          <Link className=\"btn btn-primary mt-3\" to=\"/\">Return to main page</Link>\n        </div>\n      </div>\n    </Wrapp>\n  );\n}\n","import Modal from './Modal';\n\nexport default Modal;\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport './Modal.scss';\nimport { CLOSE_MODAL } from '../../store/types/modalTypes';\n\nexport default function Modal({ data, error }) {\n  const { title, message, onClose } = error ? data.errorMessage : data;\n  const modalWrapp = useRef(null);\n  const dispatch = useDispatch();\n\n  const closeModal = useCallback(() => {\n    if (error) data.clearError();\n    else dispatch({ type: CLOSE_MODAL });\n\n    if (onClose) onClose();\n  }, [dispatch, onClose, data, error]);\n\n  useEffect(() => {\n    const wrapper = modalWrapp.current;\n    const handlerWrappClick = ({ target }) => {\n      if (target.classList.contains('modal-click')) closeModal();\n    };\n\n    wrapper.addEventListener('click', handlerWrappClick);\n\n    return () => wrapper.removeEventListener('click', handlerWrappClick);\n  }, [dispatch, closeModal]);\n\n  return (\n    <div className=\"modal-card-wrapp container-fluid\" ref={modalWrapp}>\n      <div data-testid=\"modal-wrapper\" className=\"row modal-click justify-content-center align-items-center h-100\">\n        <div className=\"col-xl-7 col-md-9\">\n          <div data-testid=\"modal-error\" className={`card modal-card ${error ? 'modal-card-error' : ''}`}>\n            <div className=\"card-header pt-3\">\n              <h5 data-testid=\"modal-title\">{title}</h5>\n            </div>\n            <div className=\"card-body\" data-testid=\"modal-message\">\n              {message}\n            </div>\n            <div className=\"card-footer\">\n              <div className=\"row justify-content-end\">\n                <div className=\"col-md-3 col-xl-2\">\n                  <button\n                    data-testid=\"close-modal-button\"\n                    className=\"bttn primary btn-close\"\n                    type=\"button\"\n                    onClick={closeModal}\n                  >\n                    Close\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { CLEAR_BOOKS_ERROR } from '../store/types/booksTypes';\nimport { CLEAR_PURCHASE_ERROR } from '../store/types/purchaseTypes';\nimport { CLEAR_USER_ERROR } from '../store/types/userTypes';\n\nconst useRequestError = () => {\n  const [isError, setError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState({});\n  const user = useSelector((state) => state.user);\n  const books = useSelector((state) => state.books);\n  const purchase = useSelector((state) => state.purchase);\n  const dispatch = useDispatch();\n\n  const clearError = useCallback(() => {\n    dispatch({ type: CLEAR_BOOKS_ERROR });\n    dispatch({ type: CLEAR_USER_ERROR });\n    dispatch({ type: CLEAR_PURCHASE_ERROR });\n  }, [dispatch]);\n\n  useEffect(() => {\n    let message = null;\n\n    if (user.error) {\n      message = {\n        title: 'Authorization Error',\n        message: user.error.message,\n      };\n    } else if (books.error) {\n      message = {\n        title: 'Books Loading Error',\n        message: books.error.message,\n      };\n    } else if (purchase.error) {\n      message = {\n        title: 'Purchase Error',\n        message: purchase.error.message,\n      };\n    }\n\n    setError(!!message);\n    setErrorMessage(message);\n  }, [user.error, books.error, purchase.error]);\n\n  return {\n    isError,\n    errorMessage,\n    clearError,\n  };\n};\n\nexport default useRequestError;\n","import React, { useEffect } from 'react';\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Switch,\n} from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport LoginPage from './pages/LoginPage';\nimport CatalogPage from './pages/CatalogPage';\nimport ProductPage from './pages/ProductPage';\nimport CartPage from './pages/CartPage';\nimport NotFoundPage from './pages/NotFoundPage';\nimport { signinFromStorage } from './store/actions/userActions';\nimport Modal from './components/Modal';\nimport useRequestError from './hooks/useRequestError';\n\nexport default function App() {\n  const user = useSelector((state) => state.user);\n  const modal = useSelector((state) => state.modal);\n  const error = useRequestError();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(signinFromStorage());\n  }, [user.token, dispatch]);\n\n  if (user.token || localStorage.getItem('authUser')) {\n    return (\n      <>\n        {error.isError && <Modal error data={error} />}\n        {modal.message && <Modal data={modal} />}\n        <Router basename={process.env.PUBLIC_URL}>\n          <Switch>\n            <Route exact path=\"/\">\n              <Redirect to=\"/books\" />\n            </Route>\n            <Route exact path=\"/signin\" component={LoginPage} />\n            <Route exact path=\"/books\" component={CatalogPage} />\n            <Route exact path=\"/cart\" component={CartPage} />\n            <Route path=\"/books/:id\" component={ProductPage} />\n            <Route exact path=\"/not-found\" component={NotFoundPage} />\n            <Route path=\"*\">\n              <Redirect to=\"/no-found\" />\n            </Route>\n          </Switch>\n        </Router>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {error.isError && <Modal error data={error} />}\n      {modal.message && <Modal message={modal.message} />}\n      <Router basename={process.env.PUBLIC_URL}>\n        <Switch>\n          <Route exact path=\"/signin\" component={LoginPage} />\n          <Route exact path=\"/not-found\" component={NotFoundPage} />\n          <Route path=\"*\">\n            <Redirect to=\"/signin\" />\n          </Route>\n        </Switch>\n      </Router>\n    </>\n  );\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\n  AUTH_USER,\n  AUTH_USER_ERROR,\n  CLEAR_USER_ERROR,\n  AUTH_USER_LOADING,\n  CLEAR_USER,\n} from '../types/userTypes';\n\nconst initialState = {\n  username: null,\n  token: null,\n  avatar: null,\n  isLoading: false,\n  error: null,\n};\n\nexport default function userReducer(state = initialState, action) {\n  switch (action.type) {\n    case AUTH_USER:\n      return {\n        isLoading: false,\n        error: null,\n        ...action.payload,\n      };\n    case AUTH_USER_ERROR:\n      return {\n        ...state,\n        isLoading: false,\n        error: action.payload,\n      };\n    case CLEAR_USER_ERROR:\n      return {\n        ...state,\n        error: null,\n      };\n    case AUTH_USER_LOADING:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case CLEAR_USER:\n      return {\n        ...initialState,\n      };\n    default:\n      return state;\n  }\n}\n","import {\n  LOAD_BOOKS,\n  LOAD_BOOKS_LOADING,\n  LOAD_BOOKS_ERROR,\n  CLEAR_BOOKS_ERROR,\n  LOAD_BOOK_BY_ID,\n  LOAD_BOOK_BY_ID_LOADING,\n  CLEAR_BOOK_SINGLE,\n  FILTER_BOOKS,\n  CLEAR_FILTER_BOOKS,\n  ADD_FILTER_BOOKS_BY_PRICE,\n  ADD_FILTER_BOOKS_BY_TITLE,\n} from '../types/booksTypes';\n\nconst initialState = {\n  catalog: [],\n  filterCondition: {\n    title: () => true,\n    price: () => true,\n  },\n  filteredCatalog: null,\n  single: null,\n  isCatalogLoading: false,\n  isSingleLoading: false,\n  error: null,\n};\n\nconst filterConditions = (cond) => ({ title, price }) => cond.title(title) && cond.price(price);\n\nexport default function userReducer(state = initialState, action) {\n  switch (action.type) {\n    case LOAD_BOOKS:\n      return {\n        ...state,\n        catalog: action.payload,\n        isCatalogLoading: false,\n      };\n    case LOAD_BOOKS_LOADING:\n      return {\n        ...state,\n        isCatalogLoading: true,\n      };\n    case LOAD_BOOK_BY_ID:\n      return {\n        ...state,\n        single: action.payload,\n        isSingleLoading: false,\n      };\n    case LOAD_BOOK_BY_ID_LOADING:\n      return {\n        ...state,\n        isSingleLoading: true,\n      };\n    case LOAD_BOOKS_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n      };\n    case CLEAR_BOOKS_ERROR:\n      return {\n        ...state,\n        error: null,\n      };\n    case CLEAR_BOOK_SINGLE:\n      return {\n        ...state,\n        single: null,\n      };\n    case ADD_FILTER_BOOKS_BY_PRICE:\n      return {\n        ...state,\n        filterCondition: {\n          ...state.filterCondition,\n          price: action.payload,\n        },\n      };\n    case ADD_FILTER_BOOKS_BY_TITLE:\n      return {\n        ...state,\n        filterCondition: {\n          ...state.filterCondition,\n          title: action.payload,\n        },\n      };\n    case FILTER_BOOKS:\n      return {\n        ...state,\n        filteredCatalog: state.catalog.filter(filterConditions(state.filterCondition)),\n      };\n    case CLEAR_FILTER_BOOKS:\n      return {\n        ...state,\n        filteredCatalog: null,\n      };\n    default:\n      return state;\n  }\n}\n","import { CLEAR_CART, PUSH_PRODUCT_TO_CART } from '../types/cartTypes';\n\nconst initialState = [];\n\nexport default function userReducer(state = initialState, action) {\n  switch (action.type) {\n    case PUSH_PRODUCT_TO_CART:\n      return [\n        ...state,\n        {\n          ...action.payload,\n          key: state.length,\n        },\n      ];\n    case CLEAR_CART:\n      return [];\n    default:\n      return state;\n  }\n}\n","import {\n  PURCHASE_SUCCESS,\n  PURCHASE_ERROR,\n  CLEAR_PURCHASE_ERROR,\n  PURCHASE_SENDING,\n  CLEAR_PURCHASE,\n} from '../types/purchaseTypes';\n\nconst initialState = {\n  isSending: false,\n  isSuccess: false,\n  error: null,\n};\n\nexport default function userReducer(state = initialState, action) {\n  switch (action.type) {\n    case PURCHASE_SENDING:\n      return {\n        ...state,\n        isSending: true,\n      };\n    case PURCHASE_SUCCESS:\n      return {\n        ...state,\n        isSuccess: true,\n        isSending: false,\n      };\n    case PURCHASE_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n        isSending: false,\n      };\n    case CLEAR_PURCHASE_ERROR:\n      return {\n        ...state,\n        error: null,\n      };\n    case CLEAR_PURCHASE:\n      return {\n        ...initialState,\n      };\n    default:\n      return state;\n  }\n}\n","import {\n  OPEN_MODAL,\n  CLOSE_MODAL,\n} from '../types/modalTypes';\n\nconst initialState = {\n  message: null,\n  title: null,\n  onClose: null,\n};\n\nexport default function userReducer(state = initialState, action) {\n  switch (action.type) {\n    case OPEN_MODAL:\n      return {\n        ...action.payload,\n      };\n\n    case CLOSE_MODAL:\n      return {\n        ...initialState,\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport userReducer from './userReducer';\nimport booksReducer from './booksReducer';\nimport cartReducer from './cartReducer';\nimport purchaseReducer from './purchaseReducer';\nimport modalReducer from './modalReducer';\n\nconst rootReducer = combineReducers({\n  user: userReducer,\n  books: booksReducer,\n  cart: cartReducer,\n  purchase: purchaseReducer,\n  modal: modalReducer,\n});\n\nexport default rootReducer;\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './scss/index.scss';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport store from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}